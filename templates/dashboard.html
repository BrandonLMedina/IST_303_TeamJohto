{% extends 'base.html' %} {% block content %}

<h2 class="fw-bold text-center mb-4" style="color: var(--cgu-red)">
  CGU Alumni Network Dashboard
</h2>

<div class="dashboard-container">
  <!-- Row 1: Profile full-width -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card profile-card">
        <img
          src="{{ url_for('static', filename='profile_placeholder.png') }}"
          alt="Profile"
          class="profile-pic" />

        <h3>{{ dashboard.full_name }}</h3>
        <p>{{ dashboard.id_label }}: {{ dashboard.id_value }}</p>

        {% if dashboard.program %}
        <p>Program: {{ dashboard.program }}</p>
        {% endif %} {% if dashboard.concentration %}
        <p>Concentration: {{ dashboard.concentration }}</p>
        {% endif %} {% if dashboard.user_type == 'student' %} {% if
        dashboard.current_year %}
        <p>Year in Program: {{ dashboard.current_year }}</p>
        {% endif %} {% if dashboard.expected_graduation_year %}
        <p>Expected Graduation: {{ dashboard.expected_graduation_year }}</p>
        {% endif %} {% else %} {% if dashboard.graduation_year %}
        <p>Graduation Year: {{ dashboard.graduation_year }}</p>
        {% endif %} {% endif %}
        <div class="profile-actions">
          <a href="{{ url_for('profile') }}" class="btn">View Profile</a>
          <a href="{{ url_for('contacts') }}" class="btn">Contacts</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Row 2 -->
  <div class="row g-4 mb-4">
    <!-- Academic Progress -->
    <div class="col-lg-6">
      <div class="card stat-card">
        <div class="card-header">Academic Progress</div>
        <div class="card-body">
          <canvas id="progressChart"></canvas>
          <p style="margin-top: 10px">Classes Completed vs Remaining</p>
        </div>
      </div>
    </div>

    <!-- Location / Preferences -->
    <div class="col-lg-6">
      <div class="card">
        <div class="card-header">
          {% if dashboard.user_type == 'student' %} Location Preferences {% else
          %} Location & Region {% endif %}
        </div>
        <div class="card-body">
          {% if dashboard.user_type == 'student' %}
          <p>
            <strong>Preferred Location:</strong> {{ dashboard.location_display
            or 'Not set yet' }}
          </p>
          <p>
            <strong>Preferred Industry:</strong> {{ dashboard.industry_name or
            'Not set yet' }}
          </p>
          {% else %}
          <p>
            <strong>Current Location:</strong> {{ dashboard.location_display or
            'Not set yet' }}
          </p>
          <p>
            <strong>Industry:</strong> {{ dashboard.industry_name or 'Not set
            yet' }}
          </p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
  <!-- END Row 2 -->

  <!-- Row 3 -->
  <div class="row g-4">
    <!-- Career Pathways -->
    <div class="col-lg-4">
      <div class="card stat-card">
        <div class="card-header">Career Pathways</div>
        <div class="card-body">
          {% if dashboard.user_type == 'alumni' %}
          <p>
            <strong>Company:</strong> {{ dashboard.company_name or 'Not set yet'
            }}
          </p>
          <p>
            <strong>Role:</strong> {{ dashboard.current_position or 'Not set
            yet' }}
          </p>
          {% if dashboard.graduation_year %}
          <p>
            <strong>Graduation Year:</strong> {{ dashboard.graduation_year }}
          </p>
          {% endif %} {% else %}
          <p>
            <strong>Target Industry:</strong> {{ dashboard.industry_name or 'Not
            set yet' }}
          </p>
          <p>
            <strong>Preferred Location:</strong> {{ dashboard.location_display
            or 'Not set yet' }}
          </p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Mentorship -->
    <div class="col-lg-4">
      <div class="card stat-card">
        <div class="card-header">Mentorship</div>
        <div class="card-body">
          {% if dashboard.user_type == 'student' %}
          <p>
            <strong>Seeking Mentor:</strong> {{ 'Yes' if
            dashboard.is_seeking_mentorship else 'No' }}
          </p>
          <p><strong>Possible Mentors:</strong> Coming soon</p>
          {% else %}
          <p>
            <strong>Open to Mentoring:</strong> {{ 'Yes' if dashboard.is_mentor
            else 'No' }}
          </p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Networking Opportunities -->
    <div class="col-lg-4">
      <div class="card stat-card">
        <div class="card-header">Networking Opportunities</div>
        <div class="card-body">
          <ul class="scholar-list">
            <li><span class="dot"></span> Opportunities coming soon</li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- END Row 3 -->
</div>
<!-- END dashboard-container -->

<!-- === Chart.js === -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const completedClasses = 2;
  const plannedClasses = 19;
  const ctx = document.getElementById("progressChart").getContext("2d");
  ctx.canvas.style.width = "200px";
  ctx.canvas.style.height = "200px";
  new Chart(ctx, {
    type: "doughnut",
    data: {
      labels: ["Completed", "Planned"],
      datasets: [
        {
          data: [completedClasses, plannedClasses],
          backgroundColor: ["#a50f15", "#f4b9b9"],
          borderWidth: 0,
        },
      ],
    },
    options: {
      cutout: "70%",
      plugins: {
        legend: {
          position: "bottom",
          labels: { boxWidth: 15 },
        },
        tooltip: {
          callbacks: {
            label: function (context) {
              return `${context.label}: ${context.parsed}`;
            },
          },
        },
      },
    },
  });
</script>
{% endblock %}
