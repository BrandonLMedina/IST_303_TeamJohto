{% extends 'base.html' %}
{% block content %}
<h2>Database Table Viewer</h2>

<form method="GET" action="{{ url_for('view_table') }}" style="margin-bottom: 20px;">
  <label for="table">Select a table:</label>
  <select name="table" id="table" required>
    <option value="" disabled selected>-- Choose a table --</option>
    {% for t in tables %}
      <option value="{{ t }}" {% if table == t %}selected{% endif %}>{{ t|capitalize }}</option>
    {% endfor %}
  </select>
  <button type="submit">View</button>
</form>

{% if table %}
  <h3>Viewing: {{ table|capitalize }}</h3>
  {% if data and data|length > 0 %}
    <table border="1" cellpadding="8" cellspacing="0" style="background:white; border-collapse: collapse;">
      <thead style="background-color:#e3e3e3;">
        <tr>
          {% for column in data[0].keys() %}
            <th>{{ column }}</th>
          {% endfor %}
        </tr>
      </thead>
      <tbody>
        {% for row in data %}
        <tr>
          {% for value in row %}
            <td>{{ value if value is not none else '' }}</td>
          {% endfor %}
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>No records found for <strong>{{ table }}</strong>.</p>
  {% endif %}
{% endif %}

<br>
<a href="{{ url_for('index') }}">‚Üê Back to Home</a>
{% endblock %}
